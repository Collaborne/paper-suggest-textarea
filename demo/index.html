<!doctype html>
<html>
	<head>
		<script type="module">
			import '@webcomponents/webcomponentsjs/webcomponents-loader.js';
			import '@polymer/iron-demo-helpers/demo-pages-shared-styles.js';
			import '@polymer/iron-demo-helpers/demo-snippet.js';
			import '@polymer/iron-input';
			import '../iron-suggest-textarea.js';
			import '../paper-suggest-textarea.js';
		</script>
	</head>

	<body>
		<demo-snippet>
			<template>
				<h2>&lt;iron-suggest-textarea&gt;</h2>
				<dom-bind>
					<template>
						<iron-suggest-textarea
							id="textarea"
							value="{{value}}"
							value-with-ids="{{valueWithIds}}"
							suggest-query="{{suggestQuery}}"
							autofocus
							placeholder="Enter a text like 'Hi @joe'">
						</iron-suggest-textarea>

						<h2>Control</h2>
						<div class="vertical-section">
							<div hidden$="[[!suggestQuery]]">
								Replace <iron-input bind-value="{{suggestQuery}}"><input></input></iron-input>
								with: <iron-input bind-value="{{id}}"><input></input></iron-input>
								<button on-tap="onReplace">Replace</button>
							</div>
							<br>
							<div>Value with IDs <b>[[valueWithIds]]</b></div>
						</div>

						<script>
							var scope = document.querySelector('dom-bind');
							scope.onReplace = function(e) {
								this.$.textarea.addReplacement(this.id, this.suggestQuery);
								this.$.textarea.replaceCurrentSelection(this.suggestQuery);
								this.$.textarea.focus();
							};
						</script>
					</template>
				</dom-bind>
			</template>
		</demo-snippet>

		<demo-snippet>
			<template>
				<h2>&lt;paper-suggest-textarea&gt;</h2>
				<dom-bind>
					<template>
						<paper-suggest-textarea
							id="textarea"
							value="{{value}}"
							value-with-ids="{{valueWithIds}}"
							suggest-query="{{suggestQuery}}"
							autofocus
							placeholder="Enter a text like 'Hi @joe'">
						</paper-suggest-textarea>

						<h2>Control</h2>
						<div class="vertical-section">
							<div hidden$="[[!suggestQuery]]">
								Replace <iron-input bind-value="{{suggestQuery}}"><input></input></iron-input>
								with: <iron-input bind-value="{{id}}"><input></input></iron-input>
								<button on-tap="onReplace">Replace</button>
							</div>
							<br>
							<div>Value with IDs <b>[[valueWithIds]]</b></div>
						</div>

						<script>
							var scope = document.querySelector('dom-bind');
							scope.onReplace = function(e) {
								this.$.textarea.addReplacement(this.id, this.suggestQuery);
								this.$.textarea.replaceCurrentSelection(this.suggestQuery);
								this.$.textarea.focus();
							};
						</script>
					</template>
				</dom-bind>
			</template>
		</demo-snippet>
	</body>
</html>
